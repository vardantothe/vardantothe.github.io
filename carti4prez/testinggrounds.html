<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2032</title>
    <link rel="stylesheet" href="https://vrdn.cc/trash/slatt.css">
</head>
<body>
    <div class="video-container">
        <a href="2032.html">
            <video id="video" autoplay loop muted playsinline>
                <source id="video-source" src="https://vrdn.cc/trash/2032.mp4" type="video/mp4">
            </video>
        </a>
    </div>
    <p class="caption">This is a parody and an enactment on what if that happened.</p>

    <script>
        const video = document.getElementById('video');
        const videoSource = document.getElementById('video-source');

        // Comprehensive mobile device detection
        const isMobileDevice = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|Tablet/i.test(navigator.userAgent) || 
                               ('ontouchstart' in window) || 
                               (navigator.maxTouchPoints > 0);

        // Detect desktop mode or desktop-like viewport
        const getViewportWidth = () => Math.max(
            window.innerWidth,
            document.documentElement.clientWidth,
            window.screen.width || 0
        );
        const isDesktopMode = getViewportWidth() > 768;

        // Detect orientation
        const isLandscape = () => window.matchMedia("(orientation: landscape)").matches || 
                                 (window.innerWidth > window.innerHeight);

        // Set initial video source
        const updateVideoSource = () => {
            const viewportWidth = getViewportWidth();
            const landscape = isLandscape();
            let newSrc = "https://vrdn.cc/trash/2032.mp4"; // Default to desktop video
            if (isMobileDevice && !isDesktopMode) {
                newSrc = "https://vrdn.cc/trash/mobile.mp4"; // Mobile video for both orientations
            }
            if (videoSource.src !== newSrc) {
                videoSource.src = newSrc;
                video.load();
            }
        };

        // Initial load
        updateVideoSource();

        // Handle resize, orientation changes, or desktop mode toggle
        let resizeTimeout;
        const handleResize = () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(updateVideoSource, 100); // Debounce for performance
        };
        window.addEventListener('resize', handleResize);
        window.addEventListener('orientationchange', handleResize); // Explicit orientation event
    </script>
</body>
</html>
